<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="activitiesSQL">
 	<select id="onActivities" parameterType="String" resultType="onActivities">
 		select * from tripactivity where activity_seq = #{activity_seq}
 	</select>
 	
 	<insert id="actReviewWrite" parameterType="actReview">
 		insert into tripactivity_review values(#{member_seq}, #{activity_review_content}, activity_review_seq.nextval, #{activity_review_score}, sysdate, #{activity_seq}, #{main_seq})
 	</insert>
 	
 	<select id="getActReviewCnt" resultType="actReviewCnt">
 		select
			nvl(count(activity_review_seq),0) as total_cnt_act_review,
			round(nvl(avg(activity_review_score),0),1) as total_avg_act_review
			from
			tripactivity_review
 	</select>
 	
 	<select id="getActReviewUserInfo" resultType="actUserInfo">
 		select 
		tripmember.nickname,
		tripmember.profileimg
		from
		tripmember
		where member_seq = #{member_seq};
 	</select>
 </mapper>